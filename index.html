<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Pre√ßo Teto</title>
    <style>
        /* CSS para estiliza√ß√£o */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        .calculator-container {
            width: 100%;
            max-width: 500px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            background-color: #f9f9f9;
            border-bottom: 1px solid #e0e0e0;
        }

        .tab-button {
            flex: 1;
            padding: 16px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            border: none;
            background-color: transparent;
            color: #777;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-button.active {
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .tab-button:hover:not(.active) {
            background-color: #f0f0f0;
        }

        .tab-content {
            display: none;
            padding: 24px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box; /* Importante para o padding n√£o quebrar o layout */
        }
        
        .result-display {
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-top: 24px;
        }

        .result-display .label {
            font-size: 14px;
            font-weight: 600;
            color: #0056b3;
            margin: 0;
        }

        .result-display .price {
            font-size: 32px;
            font-weight: 700;
            color: #0056b3;
            margin: 8px 0 0 0;
        }
        
        .result-display .sub-result {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="calculator-container">
        
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'Historico')">üìà Hist√≥rico</button>
            <button class="tab-button" onclick="openTab(event, 'Projetivo')">üîÆ Projetivo</button>
            <button class="tab-button" onclick="openTab(event, 'Hibrido')">‚öñÔ∏è H√≠brido</button>
        </div>

        <div id="Historico" class="tab-content active">
            <h3>Calculadora de Pre√ßo Teto Hist√≥rico</h3>
            <form id="form-historico">
                <div class="form-group">
                    <label for="dpa-medio-hist">Dividendo por A√ß√£o (DPA) M√©dio (R$)</label>
                    <input type
="number" id="dpa-medio-hist" step="0.01" min="0" placeholder="Ex: 3,00" oninput="calcularHistorico()">
                </div>
                <div class="form-group">
                    <label for="dy-desejado-hist">Dividend Yield (DY) Desejado (%)</label>
                    <input type="number" id="dy-desejado-hist" step="0.1" min="0" value="6" placeholder="Ex: 6" oninput="calcularHistorico()">
                </div>
            </form>
            <div id="result-hist" class="result-display">
                <p class="label">Pre√ßo Teto Hist√≥rico</p>
                <p class="price" id="price-hist">R$ 0,00</p>
            </div>
        </div>

        <div id="Projetivo" class="tab-content">
            <h3>Calculadora de Pre√ßo Teto Projetivo</h3>
            <form id="form-projetivo">
                <div class="form-group">
                    <label for="lpa-proj">Lucro por A√ß√£o (LPA) Projetivo (R$)</label>
                    <input type="number" id="lpa-proj" step="0.01" min="0" placeholder="Ex: 6,00" oninput="calcularProjetivo()">
                </div>
                <div class="form-group">
                    <label for="payout-proj">Payout M√©dio (%)</label>
                    <input type="number" id="payout-proj" step="1" min="0" max="100" placeholder="Ex: 50" oninput="calcularProjetivo()">
                </div>
                <div class="form-group">
                    <label for="dy-desejado-proj">Dividend Yield (DY) Desejado (%)</label>
                    <input type="number" id="dy-desejado-proj" step="0.1" min="0" value="6" placeholder="Ex: 6" oninput="calcularProjetivo()">
                </div>
            </form>
            <div id="result-proj" class="result-display">
                <p class="label">Pre√ßo Teto Projetivo</p>
                <p class="price" id="price-proj">R$ 0,00</p>
                <p class="sub-result" id="dpa-proj-info">DPA Projetivo: R$ 0,00</p>
            </div>
        </div>

        <div id="Hibrido" class="tab-content">
            <h3>Calculadora de Pre√ßo Teto H√≠brido</h3>
            <form id="form-hibrido">
                <div class="form-group">
                    <label for="dpa-medio-hib">DPA M√©dio Hist√≥rico (R$)</label>
                    <input type="number" id="dpa-medio-hib" step="0.01" min="0" placeholder="Ex: 3,00" oninput="calcularHibrido()">
                </div>
                <div class="form-group">
                    <label for="lpa-proj-hib">LPA Projetivo (R$)</label>
                    <input type="number" id="lpa-proj-hib" step="0.01" min="0" placeholder="Ex: 6,00" oninput="calcularHibrido()">
                </div>
                <div class="form-group">
                    <label for="payout-hib">Payout M√©dio (%)</label>
                    <input type="number" id="payout-hib" step="1" min="0" max="100" placeholder="Ex: 50" oninput="calcularHibrido()">
                </div>
                <div class="form-group">
                    <label for="dy-desejado-hib">Dividend Yield (DY) Desejado (%)</label>
                    <input type="number" id="dy-desejado-hib" step="0.1" min="0" value="6" placeholder="Ex: 6" oninput="calcularHibrido()">
                </div>
            </form>
            <div id="result-hib" class="result-display">
                <p class="label">Pre√ßo Teto H√≠brido (Conservador)</p>
                <p class="price" id="price-hib-cons">R$ 0,00</p>
                <p class="sub-result" id="price-hib-media">Teto M√©dio: R$ 0,00</p>
            </div>
        </div>

    </div>

    <script>
        // --- L√ìGICA DAS ABAS ---
        function openTab(evt, tabName) {
            // Esconde todo o conte√∫do
            let tabcontent = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Remove a classe "active" de todos os bot√µes
            let tabbuttons = document.getElementsByClassName("tab-button");
            for (let i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            }

            // Mostra a aba clicada e adiciona a classe "active" ao bot√£o
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // --- FUN√á√ïES DE C√ÅLCULO ---

        // Fun√ß√£o para formatar como moeda BRL
        function formatCurrency(value) {
            if (isNaN(value) || !isFinite(value)) {
                return "R$ 0,00";
            }
            return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // 1. Calculadora Hist√≥rica
        function calcularHistorico() {
            const dpaMedio = parseFloat(document.getElementById('dpa-medio-hist').value);
            const dyDesejado = parseFloat(document.getElementById('dy-desejado-hist').value);

            let precoTeto = 0;
            if (dpaMedio > 0 && dyDesejado > 0) {
                precoTeto = dpaMedio / (dyDesejado / 100);
            }

            document.getElementById('price-hist').innerText = formatCurrency(precoTeto);
        }

        // 2. Calculadora Projetiva
        function calcularProjetivo() {
            const lpa = parseFloat(document.getElementById('lpa-proj').value);
            const payout = parseFloat(document.getElementById('payout-proj').value);
            const dyDesejado = parseFloat(document.getElementById('dy-desejado-proj').value);

            let dpaProjetivo = 0;
            if (lpa > 0 && payout > 0) {
                dpaProjetivo = lpa * (payout / 100);
            }
            
            let precoTeto = 0;
            if (dpaProjetivo > 0 && dyDesejado > 0) {
                precoTeto = dpaProjetivo / (dyDesejado / 100);
            }

            document.getElementById('dpa-proj-info').innerText = `DPA Projetivo: ${formatCurrency(dpaProjetivo)}`;
            document.getElementById('price-proj').innerText = formatCurrency(precoTeto);
        }

        // 3. Calculadora H√≠brida
        function calcularHibrido() {
            // Inputs
            const dpaMedioHist = parseFloat(document.getElementById('dpa-medio-hib').value);
            const lpaProj = parseFloat(document.getElementById('lpa-proj-hib').value);
            const payout = parseFloat(document.getElementById('payout-hib').value);
            const dyDesejado = parseFloat(document.getElementById('dy-desejado-hib').value);

            let precoTetoHist = 0;
            let precoTetoProj = 0;
            
            const dyDecimal = dyDesejado / 100;

            // Calcular Teto Hist√≥rico
            if (dpaMedioHist > 0 && dyDecimal > 0) {
                precoTetoHist = dpaMedioHist / dyDecimal;
            }

            // Calcular Teto Projetivo
            let dpaProjetivo = 0;
            if (lpaProj > 0 && payout > 0) {
                dpaProjetivo = lpaProj * (payout / 100);
            }
            if (dpaProjetivo > 0 && dyDecimal > 0) {
                precoTetoProj = dpaProjetivo / dyDecimal;
            }
            
            // Calcular Resultados H√≠bridos
            // (Considera 0 se um dos valores n√£o for calculado)
            const tetoHistValido = precoTetoHist > 0 ? precoTetoHist : 0;
            const tetoProjValido = precoTetoProj > 0 ? precoTetoProj : 0;

            let tetoConservador = 0;
            if (tetoHistValido > 0 && tetoProjValido > 0) {
                tetoConservador = Math.min(tetoHistValido, tetoProjValido);
            } else if (tetoHistValido > 0) {
                tetoConservador = tetoHistValido;
            } else {
                tetoConservador = tetoProjValido;
            }
            
            const tetoMedio = (tetoHistValido + tetoProjValido) / 2;

            // Exibir resultados
            document.getElementById('price-hib-cons').innerText = formatCurrency(tetoConservador);
            document.getElementById('price-hib-media').innerText = `Teto M√©dio: ${formatCurrency(tetoMedio)}`;
        }

        // Garante que a primeira aba seja exibida corretamente no carregamento
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelector('.tab-button.active').click();
        });
    </script>

</body>
</html>
